(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5049","chunk-ddfd"],{DtLG:function(t,e,i){"use strict";var a=i("g0JI");i.n(a).a},Jkdn:function(t,e,i){"use strict";i.r(e);var a=i("jSZs"),n=(i("GguQ"),{props:{isAdd:{type:Boolean,required:!0},sup_this:{type:Object,default:null}},data:function(){var t=function(t,e,i){0==/^\d+$/.test(e)?i(new Error("数据长度只能输入数字")):i()};return{dialog:!1,loading:!1,form:{type_id:"",input_name:"",input_type:"",field_name:"",data_type:"",data_len:"",decimal_point:"",input_default:"",placeholder_text:"",input_verify:[],aux_text:""},input_type_list:[],lay_verify_list:[],data_type_list:[],style:"width: 184px",rules:{input_name:[{required:!0,message:"请输入表单名称",trigger:"blur"}],input_type:[{required:!0,message:"请选择表单类型",trigger:"change"}],field_name:[{required:!0,message:"请输入字段名称",trigger:"blur"},{validator:function(t,e,i){0==/^[A-Za-z]+$/.test(e)?i(new Error("字段名称只能输入字母")):i()},trigger:"blur"}],data_type:[{required:!0,message:"请选择数据类型",trigger:"change"}],data_len:[{required:!0,message:"请输入数据长度",trigger:"blur"},{validator:t,trigger:"blur"}],decimal_point:[{required:!0,message:"请输入小数点位数",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created:function(){navigator.userAgent.indexOf("Chrome")>=0?this.style="width: 184px":this.style="width: 172px"},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var t=this;this.$refs.addform.validate(function(e){if(!e)return!1;t.isAdd?t.doAdd():t.doEdit()})},doAdd:function(){var t=this,e={},i=t.form;for(var n in i)""!=i[n]&&(e[""+n]=i[n]);e.type_id=t.sup_this.formsetupid,e.data_type=t.data_type_list[t.form.data_type].data_type_id,e.input_type=t.input_type_list[t.form.input_type].input_type_id,Object(a.g)(e).then(function(e){t.loading=!0,t.resetForm(),t.$notify({title:"添加成功",type:"success",duration:2500}),t.loading=!1,t.sup_this.dataList()}).catch(function(e){t.loading=!1})},doEdit:function(){var t=this,e={},i=this.form;for(var n in i)i[n]&&""!=i[n]&&(e[""+n]=i[n]);Object(a.g)(e).then(function(e){t.resetForm(),t.$notify({title:"修改成功",type:"success",duration:2500}),t.loading=!1,t.sup_this.dataList()}).catch(function(e){t.loading=!1})},resetForm:function(){this.dialog=!1,this.$refs.addform.resetFields(),this.form={type_id:"",input_name:"",input_type:"",field_name:"",data_type:"",data_len:"",decimal_point:"",input_default:"",placeholder_text:"",input_verify:[],aux_text:""}},look:function(t){var e=this;Object(a.f)(t).then(function(t){if(e.input_type_list=t.data.input_type_list,e.data_type_list=t.data.data_type_list,e.lay_verify_list=t.data.lay_verify_list,t.data.input_info){var i=t.data.input_info;e.form={type_id:i.type_id,input_id:i.input_id,input_name:i.input_name,input_type:i.input_type,field_name:i.field_name,data_type:i.data_type,data_len:i.data_len,decimal_point:i.decimal_point,input_default:i.input_default,placeholder_text:i.placeholder_text,input_verify:i.input_verify,aux_text:i.aux_text}}}).catch(function(t){console.log(t.response.data.message)})}}}),r=(i("lOBD"),i("KHd+")),o=Object(r.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{visible:t.dialog,title:t.isAdd?"添加":"编辑","append-to-body":"",width:"50%"},on:{"update:visible":function(e){t.dialog=e}}},[i("el-form",{ref:"addform",attrs:{model:t.form,rules:t.rules,size:"small","label-width":"160px"}},[i("el-form-item",{attrs:{label:"表单名称",prop:"input_name"}},[i("el-input",{model:{value:t.form.input_name,callback:function(e){t.$set(t.form,"input_name",e)},expression:"form.input_name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"表单类型",prop:"input_type"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.input_type,callback:function(e){t.$set(t.form,"input_type",e)},expression:"form.input_type"}},t._l(t.input_type_list,function(t,e){return i("el-option",{key:e,attrs:{label:t.input_type_name,value:e}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"字段名称",prop:"field_name"}},[i("el-input",{model:{value:t.form.field_name,callback:function(e){t.$set(t.form,"field_name",e)},expression:"form.field_name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"数据类型",prop:"data_type"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.data_type,callback:function(e){t.$set(t.form,"data_type",e)},expression:"form.data_type"}},t._l(t.data_type_list,function(t,e){return i("el-option",{key:e,attrs:{label:t.data_type_name+" ("+t.data_type_value+")",value:e}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"数据长度",prop:"data_len"}},[i("el-input",{model:{value:t.form.data_len,callback:function(e){t.$set(t.form,"data_len",e)},expression:"form.data_len"}})],1),t._v(" "),""!=t.form.data_type&&1==t.data_type_list[t.form.data_type].is_decimal_point?i("el-form-item",{attrs:{label:"小数点位数",prop:"decimal_point"}},[i("el-input",{model:{value:t.form.decimal_point,callback:function(e){t.$set(t.form,"decimal_point",e)},expression:"form.decimal_point"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"表单默认值"}},[i("el-input",{model:{value:t.form.input_default,callback:function(e){t.$set(t.form,"input_default",e)},expression:"form.input_default"}})],1),t._v(" "),""!=t.form.input_type&&1==t.input_type_list[t.form.input_type].is_placeholder?i("el-form-item",{attrs:{label:"占位文本"}},[i("el-input",{model:{value:t.form.placeholder_text,callback:function(e){t.$set(t.form,"placeholder_text",e)},expression:"form.placeholder_text"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"表单验证"}},[i("el-checkbox-group",{model:{value:t.form.input_verify,callback:function(e){t.$set(t.form,"input_verify",e)},expression:"form.input_verify"}},t._l(t.lay_verify_list,function(e,a){return i("el-checkbox",{key:a,attrs:{label:e.lay_verify_id}},[t._v(t._s(e.lay_verify_name))])}))],1),t._v(" "),i("el-form-item",{attrs:{label:"辅助信息"}},[i("el-input",{model:{value:t.form.aux_text,callback:function(e){t.$set(t.form,"aux_text",e)},expression:"form.aux_text"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.doSubmit}},[t._v("确认")])],1)],1)},[],!1,null,null,null);o.options.__file="addform.vue";e.default=o.exports},g0JI:function(t,e,i){},jSZs:function(t,e,i){"use strict";i.d(e,"i",function(){return n}),i.d(e,"a",function(){return r}),i.d(e,"d",function(){return o}),i.d(e,"e",function(){return l}),i.d(e,"c",function(){return d}),i.d(e,"h",function(){return u}),i.d(e,"f",function(){return p}),i.d(e,"g",function(){return s}),i.d(e,"b",function(){return _});var a=i("t3Un");function n(){return Object(a.a)({url:"/index.php/manage/Type/index",method:"post"})}function r(t){return Object(a.a)({url:"/index.php/manage/input/add_child",method:"post",data:t})}function o(t){return Object(a.a)({url:"/index.php/manage/Type/look",method:"post",data:t})}function l(t){return Object(a.a)({url:"index.php/manage/Type/add",method:"post",data:t})}function d(t){return Object(a.a)({url:"/index.php/manage/Type/delete",method:"post",data:t})}function u(t){return Object(a.a)({url:"/index.php/manage/input/index",method:"post",data:t})}function p(t){return Object(a.a)({url:"/index.php/manage/input/look",method:"post",data:t})}function s(t){return Object(a.a)({url:"/index.php/manage/input/add_exit",method:"post",data:t})}function _(t){return Object(a.a)({url:"/index.php/manage/input/delete",method:"post",data:t})}},lOBD:function(t,e,i){"use strict";var a=i("q6Av");i.n(a).a},q6Av:function(t,e,i){},ytOH:function(t,e,i){"use strict";i.r(e);var a={components:{eForm:i("Jkdn").default},props:{data:{type:Object,required:!0},sup_this:{type:Object,required:!0}},methods:{to:function(){var t=this.$refs.addform;t.look({type_id:this.data.type_id,input_id:this.data.input_id}),t.dialog=!0}}},n=(i("DtLG"),i("KHd+")),r=Object(n.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-button",{attrs:{size:"mini",type:"success"},on:{click:this.to}},[this._v("修改")]),this._v(" "),e("eForm",{ref:"addform",attrs:{sup_this:this.sup_this,"is-add":!1}})],1)},[],!1,null,"5ce25a82",null);r.options.__file="edit.vue";e.default=r.exports}}]);