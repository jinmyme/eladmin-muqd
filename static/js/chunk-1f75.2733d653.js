(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1f75"],{djJf:function(t,e,n){"use strict";n.d(e,"g",function(){return a}),n.d(e,"h",function(){return o}),n.d(e,"e",function(){return l}),n.d(e,"c",function(){return r}),n.d(e,"i",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return d}),n.d(e,"f",function(){return s}),n.d(e,"d",function(){return f});var i=n("t3Un");function a(t){return Object(i.a)({url:"/index.php/manage/column/index",method:"post",data:t})}function o(t){return Object(i.a)({url:"/index.php/manage/column/look",method:"post",data:t})}function l(t){return Object(i.a)({url:"/index.php/manage/column/add_edit",method:"post",data:t})}function r(t){return Object(i.a)({url:"index.php/manage/column/delete",method:"post",data:t})}function u(t){return Object(i.a)({url:"/index.php/manage/Content/index",method:"post",data:t})}function c(t){return Object(i.a)({url:"/index.php/manage/Content/add_field",method:"post",data:t})}function d(t){return Object(i.a)({url:"/index.php/manage/Content/add",method:"post",data:t})}function s(t){return Object(i.a)({url:"/index.php/manage/Content/edit",method:"post",data:t})}function f(t){return Object(i.a)({url:"/index.php/manage/Content/delete",method:"post",data:t})}},iZfB:function(t,e,n){},pMMC:function(t,e,n){"use strict";n.r(e);var i=n("djJf"),a=n("GguQ"),o=n.n(a),l={name:"",props:{sup_this:{type:Object,required:!0},contData:{type:Object,required:!0}},data:function(){return{delLoading:!1,loading:!0,column_id:"",content_id:"",mainStatus:1,tableHeader:[],tableData:[],total:0,per_page:0,last_page:0,current_page:1,dialogFormVisible:!1,form:[],formDiv:[],formLabelWidth:"120px",type:[]}},mounted:function(){this.formList()},watch:{contData:function(t,e){this.formList()}},methods:{filterHandler:function(t,e,n){return e[n.property]===t},addCont:function(t,e){this.add_field({column_id:this.contData.column_id,content_id:""})},formList:function(){var t=this;Object(i.i)({column_id:t.contData.column_id,page:t.current_page}).then(function(e){t.tableHeader=e.data.input_list;var n=e.data.table_info.data;t.tableData=n,t.total=e.data.table_info.totalRows,t.per_page=e.data.table_info.listRows,t.loading=!1})},selectBtnType:function(t){this.add_field(t)},add_field:function(t){var e=this;e.content_id=t.content_id,Object(i.a)({column_id:t.column_id,content_id:t.content_id}).then(function(t){var n=t.data.inputs,i=1;e.formDiv=n,n.forEach(function(t,n){4==t.input_type?e.form.push({line:t.input_default?t.input_default:[],field_name:t.field_name,input_default:t.input_default}):10==t.input_type?t.input_default&&1!=t.input_default?e.form.push({line:!1,field_name:t.field_name,input_default:t.input_default}):e.form.push({line:!0,field_name:t.field_name,input_default:t.input_default}):e.form.push({line:t.input_default,field_name:t.field_name,input_default:t.input_default}),3==t.input_type&&(i=3)}),3==i&&setTimeout(function(){e.creatEditor()},1e3),e.mainStatus=2})},creatEditor:function(){var t=this,e=new o.a(this.$refs.editor);e.customConfig.uploadImgShowBase64=!0,e.customConfig.uploadImgHeaders=this.headers,e.customConfig.uploadFileName="file",e.customConfig.uploadImgServer=this.imagesUploadApi,e.customConfig.onchange=function(e){t.form.content=e},e.create()},subDelete:function(t,e,n){var a=this,o=this;Object(i.d)({type_id:t,content_id:e}).then(function(t){o.doClose(n),a.$notify({title:"删除成功",type:"success",duration:2500}),o.formList()})},cancel:function(){this.$refs.form.resetFields(),this.form=[],this.mainStatus=1},confirm:function(){var t=this,e=t.form,n={};""==t.content_id?(n.column_id=this.contData.column_id,e.forEach(function(t,e){n[""+t.field_name]=t.line}),Object(i.b)(n).then(function(e){t.formList(),t.mainStatus=1})):(n.column_id=this.contData.column_id,n.content_id=this.content_id,e.forEach(function(t,e){n[""+t.field_name]=t.line}),Object(i.f)(n).then(function(e){t.formList(),t.mainStatus=1}))},doClose:function(t){this.$refs[t][0].doClose()}}},r=(n("wciz"),n("KHd+")),u=Object(r.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-100"},[1==t.mainStatus?n("div",{staticClass:"w-100"},[n("el-row",{staticClass:"p-2"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"250"}},t._l(t.tableHeader,function(e,i){return n("el-table-column",{key:i,attrs:{prop:e.field_name,label:e.input_name},scopedSlots:t._u([{key:"default",fn:function(i){return["button"!=e.field_name?n("span",[t._v(t._s(i.row[e.field_name]))]):n("div",{staticClass:"w-100"},t._l(i.row.button,function(e,a){return n("div",{key:a,staticClass:"el-autocomplete",staticStyle:{"margin-right":"5px"}},["danger"!=e.type?n("el-button",{attrs:{size:"mini",type:e.type},on:{click:function(n){t.selectBtnType(e.data)}}},[t._v(t._s(e.name)+"\n                ")]):t._e(),t._v(" "),"danger"==e.type?n("el-popover",{ref:i.row.id,refInFor:!0,attrs:{placement:"top",width:"180"}},[n("p",[t._v("确定删除本条数据吗？")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.doClose(i.row.id)}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.delLoading,type:"primary",size:"mini"},on:{click:function(n){t.subDelete(i.row.type_id,e.data.content_id,i.row.id)}}},[t._v("确定")])],1),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[t._v("删除")])],1):t._e()],1)}))]}}])})}))],1),t._v(" "),n("div",{staticClass:"flex flex-row justify-content-center my-5"},[n("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next,jumper","current-page":t.current_page,"page-size":t.per_page,total:t.total},on:{"current-change":t.formList,"update:currentPage":function(e){t.current_page=e}}})],1)],1):2==t.mainStatus?n("div",{staticClass:"w-100 flex flex-row justify-content-center p-5"},[n("el-form",{ref:"form",staticClass:"w-75",attrs:{"label-width":"160px"}},[t._l(t.formDiv,function(e,i){return n("el-form-item",{key:i,attrs:{label:e.input_name}},[1==e.input_type?n("el-input",{model:{value:t.form[i].line,callback:function(e){t.$set(t.form[i],"line",e)},expression:"form[index].line"}}):t._e(),t._v(" "),2==e.input_type?n("el-input",{attrs:{type:"textarea"},model:{value:t.form[i].line,callback:function(e){t.$set(t.form[i],"line",e)},expression:"form[index].line"}}):t._e(),t._v(" "),3==e.input_type?n("div",{ref:"editor",refInFor:!0,staticClass:"editor"}):t._e(),t._v(" "),4==e.input_type?n("el-checkbox-group",{model:{value:t.form[i].line,callback:function(e){t.$set(t.form[i],"line",e)},expression:"form[index].line"}},t._l(e.children,function(t,e){return n("el-checkbox",{key:"checkbox"+e,attrs:{label:t.input_name,name:"type"}})})):t._e(),t._v(" "),5==e.input_type?n("el-radio-group",{model:{value:t.form[i].line,callback:function(e){t.$set(t.form[i],"line",e)},expression:"form[index].line"}},t._l(e.children,function(t,e){return n("el-radio",{key:"radio"+e,attrs:{label:t.input_name}})})):t._e(),t._v(" "),6==e.input_type?n("el-select",{model:{value:t.form[i].line,callback:function(e){t.$set(t.form[i],"line",e)},expression:"form[index].line"}},t._l(e.children,function(t,e){return n("el-option",{key:"select"+e,attrs:{label:t.input_name,value:t.input_default}})})):t._e(),t._v(" "),8==e.input_type?n("el-col",{attrs:{span:6}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form[i].line,callback:function(e){t.$set(t.form[i],"line",e)},expression:"form[index].line"}})],1):t._e(),t._v(" "),7==e.input_type?n("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1):t._e(),t._v(" "),10==e.input_type?n("el-switch",{model:{value:t.form[i].line,callback:function(e){t.$set(t.form[i],"line",e)},expression:"form[index].line"}}):t._e()],1)}),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.confirm()}}},[t._v("确定")]),t._v(" "),n("el-button",{on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],2)],1):t._e()])},[],!1,null,"6d4d81a4",null);u.options.__file="content.vue";e.default=u.exports},wciz:function(t,e,n){"use strict";var i=n("iZfB");n.n(i).a}}]);