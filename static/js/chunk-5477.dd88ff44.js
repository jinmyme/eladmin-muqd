(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5477"],{AwpJ:function(e,t,r){},VCwm:function(e,t,r){},Zz6V:function(e,t,r){"use strict";var a=r("AwpJ");r.n(a).a},fIwS:function(e,t,r){"use strict";r.r(t);var a=r("wk8/"),o=(r("VCwm"),{props:{isAdd:{type:Boolean,required:!0},sup_this:{type:Object,default:null}},data:function(){return{dialog:!1,loading:!1,form:{admin_id:"",username:"",password:"",imageUrl:"",headpic:{},role_id:""},roleIds:[],roles:[],depts:[],deptId:null,jobId:null,jobs:[],style:"width: 184px",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]}}},created:function(){navigator.userAgent.indexOf("Chrome")>=0?this.style="width: 184px":this.style="width: 172px"},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var e=this;""===this.imageUrl?this.$message({message:"请上传头像",type:"warning"}):""===this.form.role_id?this.$message({message:"角色不能为空",type:"warning"}):this.$refs.form.validate(function(t){if(!t)return!1;e.isAdd?e.doAdd():e.doEdit()})},doAdd:function(){var e=this;Object(a.a)({headpic:e.form.headpic,username:e.form.username,password:e.form.password,role_id:e.form.role_id}).then(function(t){e.loading=!0,e.form.roles=[],e.resetForm(),e.$notify({title:"添加成功",type:"success",duration:2500}),e.loading=!1,e.sup_this.userList()}).catch(function(t){e.loading=!1,console.log(t.response.data.message)})},doEdit:function(){var e=this;Object(a.c)({admin_id:this.form.admin_id,headpic:this.form.headpic,username:this.form.username,password:this.form.password,role_id:this.form.role_id}).then(function(t){e.resetForm(),e.$notify({title:"修改成功",type:"success",duration:2500}),e.loading=!1,e.sup_this.userList()}).catch(function(t){e.loading=!1,console.log(t.response.data.message)})},resetForm:function(){this.dialog=!1,this.$refs.form.resetFields(),this.deptId=null,this.jobId=null,this.roleIds=[],this.form={username:"",password:"",imageUrl:"",headpic:{},role_id:""}},getRoles:function(){var e=this;Object(a.d)().then(function(t){e.roles=t.data}).catch(function(e){console.log(e.response.data.message)})},isvalidPhone:function(e){return/^1[3|4|5|7|8][0-9]\d{8}$/.test(e)},handleAvatarChange:function(e,t){this.form.imageUrl=URL.createObjectURL(e.raw),this.form.headpic=e},beforeAvatarUpload:function(e){var t="image"===e.type.split("/")[0],r=e.size/1024/1024<6;return t||this.$message.error("上传头像图片格式错误！"),r||this.$message.error("上传头像图片大小不能超过 6MB!"),t&&r}}}),s=(r("Zz6V"),r("KHd+")),i=Object(s.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.dialog,title:e.isAdd?"新增用户":"编辑用户","append-to-body":"",width:"570px"},on:{"update:visible":function(t){e.dialog=t}}},[r("el-form",{ref:"form",attrs:{inline:!0,model:e.form,rules:e.rules,size:"small"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户头像"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":e.handleAvatarChange,"before-upload":e.beforeAvatarUpload}},[e.form.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.form.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"角色"}},[r("el-select",{staticStyle:{width:"450px"},attrs:{placeholder:"请选择"},model:{value:e.form.role_id,callback:function(t){e.$set(e.form,"role_id",t)},expression:"form.role_id"}},e._l(e.roles,function(e,t){return r("el-option",{key:e.rolename+t,attrs:{label:e.rolename,value:e.role_id}})}))],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("确认")])],1)],1)},[],!1,null,null,null);i.options.__file="form.vue";t.default=i.exports},"wk8/":function(e,t,r){"use strict";r.d(t,"g",function(){return o}),r.d(t,"a",function(){return s}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return n}),r.d(t,"d",function(){return l}),r.d(t,"h",function(){return d}),r.d(t,"f",function(){return u}),r.d(t,"e",function(){return c});var a=r("t3Un");function o(e){return Object(a.a)({url:"/index.php/manage/User/user_list",method:"post",data:e})}function s(e){return Object(a.a)({url:"/index.php/manage/User/user_add",method:"post",data:e})}function i(e){return Object(a.a)({url:"index.php/manage/user/user_del",method:"post",data:e})}function n(e){return Object(a.a)({url:"/index.php/manage/User/user_edit",method:"post",data:e})}function l(e){return Object(a.a)({url:"/index.php/manage/user/role_list",method:"post",data:e})}function d(e){return Object(a.a)({url:"api/users/validPass/"+e,method:"get"})}function u(e){return Object(a.a)({url:"api/users/updatePass/"+e,method:"get"})}function c(e,t){return Object(a.a)({url:"api/users/updateEmail/"+e,method:"post",data:t})}}}]);